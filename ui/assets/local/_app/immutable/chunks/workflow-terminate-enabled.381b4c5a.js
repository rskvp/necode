import{d as c,r as k,w as t}from"./index.169c571c.js";import{p as w}from"./stores.5c33997d.js";import{t as a}from"./translate.18791197.js";import{a as m,b as h}from"./workflow-service.17fc7143.js";import{s as b}from"./list-workflow-query.5c6b0e81.js";const p=300,C=async(r,o,e)=>{o.set(!0);try{await e()}catch(s){console.error(s)}r.set(!1),setTimeout(()=>{o.set(!1)},p)},g=t(0),W=c([w],([r])=>{var o,e;return(e=(o=r.data)==null?void 0:o.settings)==null?void 0:e.hideWorkflowQueryErrors}),y=c([w],([r])=>r.params.namespace),E=c([w],([r])=>r.url.searchParams.get("query")),v=c([y,E,g,b,W],([r,o,e,s,l])=>({namespace:r,query:o,refresh:e,supportsAdvancedVisibility:s,hideWorkflowQueryErrors:l})),q=r=>{S.set(r)},A=r=>v.subscribe(({namespace:o,query:e,supportsAdvancedVisibility:s,hideWorkflowQueryErrors:l})=>{C(P,Q,async()=>{const{workflows:u,error:f}=await m(o,{query:e});if(r(u),s){const d=await h(o,e);q(d)}f?l?i.set(a("workflows","workflows-error-querying")):i.set(f):i.set("")})}),B=t(""),Q=t(!0),P=t(!0),S=t({count:0,totalCount:0}),i=t(""),F=k([],A),G=t("");var T=(r=>(r[r.Unspecified=0]="Unspecified",r[r.Signal=1]="Signal",r[r.None=2]="None",r))(T||{}),n=(r=>(r[r.Cancel=0]="Cancel",r[r.Reset=1]="Reset",r[r.Terminate=2]="Terminate",r))(n||{});function U(r){console.error("Unhandled action:",r)}const V=r=>{switch(r){case n.Cancel:return"canceled";case n.Reset:return"reset";case n.Terminate:return"terminated";default:U(r)}},x=(r,o)=>{const e=a("workflows",V(r));return o?a("workflows","workflow-action-reason-placeholder-with-email",{action:e,email:o}):a("workflows","workflow-action-reason-placeholder",{action:e})},H=({action:r,reason:o,email:e})=>{const s=x(r,e);return o?[o.trim(),s].join(" "):s},I=r=>!r.disableWriteActions&&!r.workflowCancelDisabled,J=r=>!r.disableWriteActions&&!r.workflowTerminateDisabled;export{n as A,T as R,J as a,B as b,F as c,i as d,G as e,H as f,x as g,S as h,P as l,g as r,Q as u,I as w};
