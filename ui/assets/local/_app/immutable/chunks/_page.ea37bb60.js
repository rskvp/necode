import{e as A}from"./workflow-service.17fc7143.js";import{a as _}from"./namespaces-service.3b96b85e.js";const E=async function({params:e,url:d}){var c,n,l,f,h,g,w,u;const{searchParams:o}=d;o.has("time-range")||o.set("time-range","1 day");const y=o.get("workflow-id"),m=o.get("workflow-type"),v=o.get("time-range"),p=o.get("status"),t=await _(e.namespace),b=(l=(n=(c=t.config)==null?void 0:c.historyArchivalUri)==null?void 0:n.toLowerCase())==null?void 0:l.startsWith("s3://"),k=(g=(h=(f=t.config)==null?void 0:f.historyArchivalUri)==null?void 0:h.toLowerCase())==null?void 0:g.startsWith("gs://"),i=b||k,S=i?{}:{workflowId:y,workflowType:m,closeTime:v,executionStatus:p},a=((w=t==null?void 0:t.config)==null?void 0:w.historyArchivalState)==="Enabled",s=((u=t==null?void 0:t.config)==null?void 0:u.visibilityArchivalState)==="Enabled",r=a&&s?await A(e.namespace,S,fetch):null;return{workflows:r?r.workflows:[],namespace:t,archivalEnabled:a,visibilityArchivalEnabled:s,archivalQueryingNotSupported:i}},j=Object.freeze(Object.defineProperty({__proto__:null,load:E},Symbol.toStringTag,{value:"Module"}));export{j as _,E as l};
